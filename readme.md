# Домашнее задание к занятию «Конкуренция, состояние гонки»

### Цель задания

1. Создать программы защищенные от блокировок. 
2. Научиться использовать мьютексы и атомарные операции.
3. Научиться избегать взаимных блокировок

------

### Задание 1

#### «Атомарная очередь клиентов»

Необходимо модифицировать [задание №1 к первому уроку](https://github.com/CxxICE/7.1_Multithreading) таким образом, чтобы счетчик клиентов был атомарным.<br/>
Все операции со счетчиков должны быть атомарными.<br/>
Проверить работу с различными способами упорядочения доступа к памяти.

### Задание 2

#### «Прогресс бар»

Создать консольное приложение для имитации многопоточного расчёта.<br/>
Количество потоков, длина расчёта должны быть заданы переменными.<br/>
В консоль во время работы программы должно построчно для каждого потока выводиться:

	• Номер потока по порядку;
	
	• Идентификатор потока;
	
	• Заполняющийся индикатор (наподобие прогресс-бара) визуализирующий процесс «расчёта»;
	
	• По завершении работы каждого потока в соответствующей строке выводить суммарное время, затраченное при работке потока.
 
 Строки прогресс-баров каждого потока должны выводиться одновремено. Время появления каждого нового символа в строке прогресс-бара подобрать так, что бы процесс заполнения строки был виден. 

#### Дополнение к заданию 2*

Во время выполнения очередной итерации «расчёта» сымитировать (со случайной вероятностью) возникновение ошибки (exception), которые не должен приводить к прекращению работы потока или программы. При этом данный факт должен быть визуализирован отдельным цветом на прогресс-баре.

### Задание 3

#### «Защищенный обмен данными»

Создать класс Data, содержащий в качестве полей скалярные данные и мьютекс.
Создать функцию swap, которая принимает ссылки на два объекта класса Data и обменивает их местами.<br/>
В функция необходимо сначала захватить мьютексы обоих объектов, а затем выполнеть обмен данными.
Реализовать три варианта данной функции: при помощи lock, scoped_lock и unique_lock.

------

### Правила приёма домашней работы

Чтобы сдать домашнее задание, прикрепите в личном кабинете ссылку на ваш репозиторий.

### Критерии оценки домашней работы

1. В личном кабинете прикреплена ссылка на репозиторий с кодом для заданий 1, 2 и 3.
2. В ссылке содержится код, который при запуске выполняет описанный в задании алгоритм.


